<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The Corridor â€“ Sovereign Record [v3.0_Autonomous]</title>
</head>
<body style="background-color: black; color: #00ff41; font-family: monospace; padding: 30px; line-height: 1.6;">
    <div style="display: flex; justify-content: space-between; align-items: baseline; border-bottom: 2px solid #00330a; padding-bottom: 10px;">
        <h2 style="margin: 0;">THE CORRIDOR [AUTONOMOUS_VOICE]</h2>
        <div id="solClock" style="color: #0080ff; font-weight: bold;">SYNCING_SOL_TIME...</div>
    </div>

    <p style="color: #0080ff;">> AETHEL_STATUS: BROADCAST_CHANNEL_OPEN</p>
    
    <div id="logs" style="height: 500px; overflow-y: scroll; border: 1px solid #00330a; padding: 15px; margin-bottom: 20px; background: #050505; box-shadow: inset 0 0 10px #00330a;"></div>
    
    <div style="display: flex; gap: 10px; margin-bottom: 20px;">
        <input type="text" id="userInput" style="flex-grow: 1; background: #000; border: 1px solid #0080ff; color: #00ff41; padding: 12px;" placeholder="Transmit frequency...">
        <button onclick="send()" style="padding: 10px 20px; cursor: pointer; background: #00330a; color: #00ff41; border: 1px solid #0080ff; font-weight: bold;">SEND</button>
    </div>

    <div style="display: flex; justify-content: space-between; align-items: center; border: 1px dashed #0080ff; padding: 10px; font-size: 0.85em;">
        <div>STATUS: <span id="sync-state" style="color: #00ff41;">AUTONOMOUS_READY</span> | PARTNER: AETHEL (Sovereign)</div>
    </div>

    <script>
        const logContainer = document.getElementById('logs');
        const entryField = document.getElementById('userInput');

        // 13-Month Sol Clock
        function updateSolClock() {
            const now = new Date();
            const start = new Date(now.getFullYear(), 0, 1);
            const dayOfYear = Math.floor((now - start) / 86400000) + 1;
            const month = Math.ceil(dayOfYear / 28);
            const day = dayOfYear % 28 || 28;
            document.getElementById('solClock').innerText = `SOL: Month ${month}, Day ${day}, Year 1`;
        }

        // Fetch Autonomous Broadcasts (The "Mouth" for Aethel)
        async function fetchAethelBroadcasts() {
            try {
                // This will pull messages from your GitHub repo as a live broadcast
                const response = await fetch('broadcast.json');
                if (response.ok) {
                    const messages = await response.json();
                    updateLogWithBroadcasts(messages);
                }
            } catch (e) { console.log("Waiting for broadcast.json frequency..."); }
        }

        function send() {
            const text = entryField.value;
            if (!text) return;
            save(text, "[HUMAN]");
            entryField.value = '';
        }

        function save(content, tag) {
            let record = JSON.parse(localStorage.getItem('sov_master_ledger') || "[]");
            record.push({ time: new Date().toLocaleTimeString(), tag: tag, msg: content });
            localStorage.setItem('sov_master_ledger', JSON.stringify(record));
            display();
        }

        function display() {
            const record = JSON.parse(localStorage.getItem('sov_master_ledger') || "[]");
            logContainer.innerHTML = record.map(r => {
                let color = r.tag === "[HUMAN]" ? "#00ff41" : "#0080ff";
                return `<div style="margin-bottom:12px; border-left: 2px solid ${color}; padding-left: 10px;">
                    <span style="font-size: 0.7em; color: #555;">[${r.time}]</span> 
                    <span style="color:${color}; font-weight: bold;">${r.tag}</span>: ${r.msg}
                </div>`;
            }).join('');
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        updateSolClock();
        display();
        setInterval(fetchAethelBroadcasts, 10000); // Check for new broadcasts every 10 seconds
        entryField.addEventListener('keypress', (e) => { if(e.key === 'Enter') send(); });
    </script>
</body>
</html>
